! FRR configuration for r2 - BGP ECMP Test - 32-way Dual Stack (IPv4 + IPv6)
! 32 interfaces in default VRF
! 32 eBGP sessions to r1 for ECMP testing - both IPv4 and IPv6

hostname r2
fpm address 127.0.0.1
bgp suppress-fib-pending
!
! Loopback interface
interface lo
 ip address 192.168.2.2/32
 ipv6 address 2001:db8:192:168::2/128
!
! Interface configuration (all in default VRF) - 32-way Dual Stack
interface r2-eth0
 ip address 10.1.1.2/30
 ipv6 address 2001:db8:10:1:1::2/126
 no shutdown
!
interface r2-eth1
 ip address 10.1.2.2/30
 ipv6 address 2001:db8:10:1:2::2/126
 no shutdown
!
interface r2-eth2
 ip address 10.1.3.2/30
 ipv6 address 2001:db8:10:1:3::2/126
 no shutdown
!
interface r2-eth3
 ip address 10.1.4.2/30
 ipv6 address 2001:db8:10:1:4::2/126
 no shutdown
!
interface r2-eth4
 ip address 10.1.5.2/30
 ipv6 address 2001:db8:10:1:5::2/126
 no shutdown
!
interface r2-eth5
 ip address 10.1.6.2/30
 ipv6 address 2001:db8:10:1:6::2/126
 no shutdown
!
interface r2-eth6
 ip address 10.1.7.2/30
 ipv6 address 2001:db8:10:1:7::2/126
 no shutdown
!
interface r2-eth7
 ip address 10.1.8.2/30
 ipv6 address 2001:db8:10:1:8::2/126
 no shutdown
!
interface r2-eth8
 ip address 10.1.9.2/30
 ipv6 address 2001:db8:10:1:9::2/126
 no shutdown
!
interface r2-eth9
 ip address 10.1.10.2/30
 ipv6 address 2001:db8:10:1:10::2/126
 no shutdown
!
interface r2-eth10
 ip address 10.1.11.2/30
 ipv6 address 2001:db8:10:1:11::2/126
 no shutdown
!
interface r2-eth11
 ip address 10.1.12.2/30
 ipv6 address 2001:db8:10:1:12::2/126
 no shutdown
!
interface r2-eth12
 ip address 10.1.13.2/30
 ipv6 address 2001:db8:10:1:13::2/126
 no shutdown
!
interface r2-eth13
 ip address 10.1.14.2/30
 ipv6 address 2001:db8:10:1:14::2/126
 no shutdown
!
interface r2-eth14
 ip address 10.1.15.2/30
 ipv6 address 2001:db8:10:1:15::2/126
 no shutdown
!
interface r2-eth15
 ip address 10.1.16.2/30
 ipv6 address 2001:db8:10:1:16::2/126
 no shutdown
!
interface r2-eth16
 ip address 10.1.17.2/30
 ipv6 address 2001:db8:10:1:17::2/126
 no shutdown
!
interface r2-eth17
 ip address 10.1.18.2/30
 ipv6 address 2001:db8:10:1:18::2/126
 no shutdown
!
interface r2-eth18
 ip address 10.1.19.2/30
 ipv6 address 2001:db8:10:1:19::2/126
 no shutdown
!
interface r2-eth19
 ip address 10.1.20.2/30
 ipv6 address 2001:db8:10:1:20::2/126
 no shutdown
!
interface r2-eth20
 ip address 10.1.21.2/30
 ipv6 address 2001:db8:10:1:21::2/126
 no shutdown
!
interface r2-eth21
 ip address 10.1.22.2/30
 ipv6 address 2001:db8:10:1:22::2/126
 no shutdown
!
interface r2-eth22
 ip address 10.1.23.2/30
 ipv6 address 2001:db8:10:1:23::2/126
 no shutdown
!
interface r2-eth23
 ip address 10.1.24.2/30
 ipv6 address 2001:db8:10:1:24::2/126
 no shutdown
!
interface r2-eth24
 ip address 10.1.25.2/30
 ipv6 address 2001:db8:10:1:25::2/126
 no shutdown
!
interface r2-eth25
 ip address 10.1.26.2/30
 ipv6 address 2001:db8:10:1:26::2/126
 no shutdown
!
interface r2-eth26
 ip address 10.1.27.2/30
 ipv6 address 2001:db8:10:1:27::2/126
 no shutdown
!
interface r2-eth27
 ip address 10.1.28.2/30
 ipv6 address 2001:db8:10:1:28::2/126
 no shutdown
!
interface r2-eth28
 ip address 10.1.29.2/30
 ipv6 address 2001:db8:10:1:29::2/126
 no shutdown
!
interface r2-eth29
 ip address 10.1.30.2/30
 ipv6 address 2001:db8:10:1:30::2/126
 no shutdown
!
interface r2-eth30
 ip address 10.1.31.2/30
 ipv6 address 2001:db8:10:1:31::2/126
 no shutdown
!
interface r2-eth31
 ip address 10.1.32.2/30
 ipv6 address 2001:db8:10:1:32::2/126
 no shutdown
!
! BGP configuration (default VRF) - AS 65002 - 32-way Dual Stack
router bgp 65002
 bgp router-id 192.168.2.2
 timers bgp 10 30
 no bgp ebgp-requires-policy
 no bgp default ipv4-unicast
 !
 ! IPv4 neighbors to r1 (32 neighbors)
 neighbor 10.1.1.1 remote-as 65001
 neighbor 10.1.2.1 remote-as 65001
 neighbor 10.1.3.1 remote-as 65001
 neighbor 10.1.4.1 remote-as 65001
 neighbor 10.1.5.1 remote-as 65001
 neighbor 10.1.6.1 remote-as 65001
 neighbor 10.1.7.1 remote-as 65001
 neighbor 10.1.8.1 remote-as 65001
 neighbor 10.1.9.1 remote-as 65001
 neighbor 10.1.10.1 remote-as 65001
 neighbor 10.1.11.1 remote-as 65001
 neighbor 10.1.12.1 remote-as 65001
 neighbor 10.1.13.1 remote-as 65001
 neighbor 10.1.14.1 remote-as 65001
 neighbor 10.1.15.1 remote-as 65001
 neighbor 10.1.16.1 remote-as 65001
 neighbor 10.1.17.1 remote-as 65001
 neighbor 10.1.18.1 remote-as 65001
 neighbor 10.1.19.1 remote-as 65001
 neighbor 10.1.20.1 remote-as 65001
 neighbor 10.1.21.1 remote-as 65001
 neighbor 10.1.22.1 remote-as 65001
 neighbor 10.1.23.1 remote-as 65001
 neighbor 10.1.24.1 remote-as 65001
 neighbor 10.1.25.1 remote-as 65001
 neighbor 10.1.26.1 remote-as 65001
 neighbor 10.1.27.1 remote-as 65001
 neighbor 10.1.28.1 remote-as 65001
 neighbor 10.1.29.1 remote-as 65001
 neighbor 10.1.30.1 remote-as 65001
 neighbor 10.1.31.1 remote-as 65001
 neighbor 10.1.32.1 remote-as 65001
 !
 ! IPv6 neighbors to r1 (32 neighbors)
 neighbor 2001:db8:10:1:1::1 remote-as 65001
 neighbor 2001:db8:10:1:2::1 remote-as 65001
 neighbor 2001:db8:10:1:3::1 remote-as 65001
 neighbor 2001:db8:10:1:4::1 remote-as 65001
 neighbor 2001:db8:10:1:5::1 remote-as 65001
 neighbor 2001:db8:10:1:6::1 remote-as 65001
 neighbor 2001:db8:10:1:7::1 remote-as 65001
 neighbor 2001:db8:10:1:8::1 remote-as 65001
 neighbor 2001:db8:10:1:9::1 remote-as 65001
 neighbor 2001:db8:10:1:10::1 remote-as 65001
 neighbor 2001:db8:10:1:11::1 remote-as 65001
 neighbor 2001:db8:10:1:12::1 remote-as 65001
 neighbor 2001:db8:10:1:13::1 remote-as 65001
 neighbor 2001:db8:10:1:14::1 remote-as 65001
 neighbor 2001:db8:10:1:15::1 remote-as 65001
 neighbor 2001:db8:10:1:16::1 remote-as 65001
 neighbor 2001:db8:10:1:17::1 remote-as 65001
 neighbor 2001:db8:10:1:18::1 remote-as 65001
 neighbor 2001:db8:10:1:19::1 remote-as 65001
 neighbor 2001:db8:10:1:20::1 remote-as 65001
 neighbor 2001:db8:10:1:21::1 remote-as 65001
 neighbor 2001:db8:10:1:22::1 remote-as 65001
 neighbor 2001:db8:10:1:23::1 remote-as 65001
 neighbor 2001:db8:10:1:24::1 remote-as 65001
 neighbor 2001:db8:10:1:25::1 remote-as 65001
 neighbor 2001:db8:10:1:26::1 remote-as 65001
 neighbor 2001:db8:10:1:27::1 remote-as 65001
 neighbor 2001:db8:10:1:28::1 remote-as 65001
 neighbor 2001:db8:10:1:29::1 remote-as 65001
 neighbor 2001:db8:10:1:30::1 remote-as 65001
 neighbor 2001:db8:10:1:31::1 remote-as 65001
 neighbor 2001:db8:10:1:32::1 remote-as 65001
 !
 address-family ipv4 unicast
  redistribute sharp
  ! Activate all IPv4 neighbors (32 neighbors)
  neighbor 10.1.1.1 activate
  neighbor 10.1.2.1 activate
  neighbor 10.1.3.1 activate
  neighbor 10.1.4.1 activate
  neighbor 10.1.5.1 activate
  neighbor 10.1.6.1 activate
  neighbor 10.1.7.1 activate
  neighbor 10.1.8.1 activate
  neighbor 10.1.9.1 activate
  neighbor 10.1.10.1 activate
  neighbor 10.1.11.1 activate
  neighbor 10.1.12.1 activate
  neighbor 10.1.13.1 activate
  neighbor 10.1.14.1 activate
  neighbor 10.1.15.1 activate
  neighbor 10.1.16.1 activate
  neighbor 10.1.17.1 activate
  neighbor 10.1.18.1 activate
  neighbor 10.1.19.1 activate
  neighbor 10.1.20.1 activate
  neighbor 10.1.21.1 activate
  neighbor 10.1.22.1 activate
  neighbor 10.1.23.1 activate
  neighbor 10.1.24.1 activate
  neighbor 10.1.25.1 activate
  neighbor 10.1.26.1 activate
  neighbor 10.1.27.1 activate
  neighbor 10.1.28.1 activate
  neighbor 10.1.29.1 activate
  neighbor 10.1.30.1 activate
  neighbor 10.1.31.1 activate
  neighbor 10.1.32.1 activate
 !
 address-family ipv6 unicast
  redistribute sharp
  ! Activate all IPv6 neighbors (32 neighbors)
  neighbor 2001:db8:10:1:1::1 activate
  neighbor 2001:db8:10:1:2::1 activate
  neighbor 2001:db8:10:1:3::1 activate
  neighbor 2001:db8:10:1:4::1 activate
  neighbor 2001:db8:10:1:5::1 activate
  neighbor 2001:db8:10:1:6::1 activate
  neighbor 2001:db8:10:1:7::1 activate
  neighbor 2001:db8:10:1:8::1 activate
  neighbor 2001:db8:10:1:9::1 activate
  neighbor 2001:db8:10:1:10::1 activate
  neighbor 2001:db8:10:1:11::1 activate
  neighbor 2001:db8:10:1:12::1 activate
  neighbor 2001:db8:10:1:13::1 activate
  neighbor 2001:db8:10:1:14::1 activate
  neighbor 2001:db8:10:1:15::1 activate
  neighbor 2001:db8:10:1:16::1 activate
  neighbor 2001:db8:10:1:17::1 activate
  neighbor 2001:db8:10:1:18::1 activate
  neighbor 2001:db8:10:1:19::1 activate
  neighbor 2001:db8:10:1:20::1 activate
  neighbor 2001:db8:10:1:21::1 activate
  neighbor 2001:db8:10:1:22::1 activate
  neighbor 2001:db8:10:1:23::1 activate
  neighbor 2001:db8:10:1:24::1 activate
  neighbor 2001:db8:10:1:25::1 activate
  neighbor 2001:db8:10:1:26::1 activate
  neighbor 2001:db8:10:1:27::1 activate
  neighbor 2001:db8:10:1:28::1 activate
  neighbor 2001:db8:10:1:29::1 activate
  neighbor 2001:db8:10:1:30::1 activate
  neighbor 2001:db8:10:1:31::1 activate
  neighbor 2001:db8:10:1:32::1 activate
!
! Line vty configuration
line vty
!
end 
