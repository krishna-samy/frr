! FRR configuration for r1 - BGP Asymmetric VRF Cross-Connect Test
! 4 VRFs with 1 interface each to all 4 upstream routers
! Cross-connect: each VRF -> all routers (r2, r3, r4, r5)

hostname r1
!
! Create VRFs
vrf vrf1
exit-vrf
!
vrf vrf2
exit-vrf
!
vrf vrf3
exit-vrf
!
vrf vrf4
exit-vrf
!
! Loopback interface
interface lo
 ip address 192.168.1.1/32
!
! VRF1 interfaces - connects to all routers (r2, r3, r4, r5)
interface r1-eth0 vrf vrf1
 ip address 10.1.1.1/30
 no shutdown
!
interface r1-eth1 vrf vrf1
 ip address 10.1.2.1/30
 no shutdown
!
interface r1-eth2 vrf vrf1
 ip address 10.1.3.1/30
 no shutdown
!
interface r1-eth3 vrf vrf1
 ip address 10.1.4.1/30
 no shutdown
!
! VRF2 interfaces - connects to all routers (r2, r3, r4, r5)
interface r1-eth4 vrf vrf2
 ip address 10.1.5.1/30
 no shutdown
!
interface r1-eth5 vrf vrf2
 ip address 10.1.6.1/30
 no shutdown
!
interface r1-eth6 vrf vrf2
 ip address 10.1.7.1/30
 no shutdown
!
interface r1-eth7 vrf vrf2
 ip address 10.1.8.1/30
 no shutdown
!
! VRF3 interfaces - connects to all routers (r2, r3, r4, r5)
interface r1-eth8 vrf vrf3
 ip address 10.1.9.1/30
 no shutdown
!
interface r1-eth9 vrf vrf3
 ip address 10.1.10.1/30
 no shutdown
!
interface r1-eth10 vrf vrf3
 ip address 10.1.11.1/30
 no shutdown
!
interface r1-eth11 vrf vrf3
 ip address 10.1.12.1/30
 no shutdown
!
! VRF4 interfaces - connects to all routers (r2, r3, r4, r5)
interface r1-eth12 vrf vrf4
 ip address 10.1.13.1/30
 no shutdown
!
interface r1-eth13 vrf vrf4
 ip address 10.1.14.1/30
 no shutdown
!
interface r1-eth14 vrf vrf4
 ip address 10.1.15.1/30
 no shutdown
!
interface r1-eth15 vrf vrf4
 ip address 10.1.16.1/30
 no shutdown
!
! BGP configuration for VRF1 - cross-connects to all routers
router bgp 65001 vrf vrf1
 bgp router-id 192.168.1.1
 timers bgp 10 30
 no bgp ebgp-requires-policy
 no bgp default ipv4-unicast
 !
 neighbor 10.1.1.2 remote-as 65002
 neighbor 10.1.2.2 remote-as 65003
 neighbor 10.1.3.2 remote-as 65004
 neighbor 10.1.4.2 remote-as 65005
 !
 address-family ipv4 unicast
  redistribute sharp
  neighbor 10.1.1.2 activate
  neighbor 10.1.2.2 activate
  neighbor 10.1.3.2 activate
  neighbor 10.1.4.2 activate
!
! BGP configuration for VRF2 - cross-connects to all routers
router bgp 65001 vrf vrf2
 bgp router-id 192.168.1.1
 timers bgp 10 30
 no bgp ebgp-requires-policy
 no bgp default ipv4-unicast
 !
 neighbor 10.1.5.2 remote-as 65002
 neighbor 10.1.6.2 remote-as 65003
 neighbor 10.1.7.2 remote-as 65004
 neighbor 10.1.8.2 remote-as 65005
 !
 address-family ipv4 unicast
  redistribute sharp
  neighbor 10.1.5.2 activate
  neighbor 10.1.6.2 activate
  neighbor 10.1.7.2 activate
  neighbor 10.1.8.2 activate
!
! BGP configuration for VRF3 - cross-connects to all routers
router bgp 65001 vrf vrf3
 bgp router-id 192.168.1.1
 timers bgp 10 30
 no bgp ebgp-requires-policy
 no bgp default ipv4-unicast
 !
 neighbor 10.1.9.2 remote-as 65002
 neighbor 10.1.10.2 remote-as 65003
 neighbor 10.1.11.2 remote-as 65004
 neighbor 10.1.12.2 remote-as 65005
 !
 address-family ipv4 unicast
  redistribute sharp
  neighbor 10.1.9.2 activate
  neighbor 10.1.10.2 activate
  neighbor 10.1.11.2 activate
  neighbor 10.1.12.2 activate
!
! BGP configuration for VRF4 - cross-connects to all routers
router bgp 65001 vrf vrf4
 bgp router-id 192.168.1.1
 timers bgp 10 30
 no bgp ebgp-requires-policy
 no bgp default ipv4-unicast
 !
 neighbor 10.1.13.2 remote-as 65002
 neighbor 10.1.14.2 remote-as 65003
 neighbor 10.1.15.2 remote-as 65004
 neighbor 10.1.16.2 remote-as 65005
 !
 address-family ipv4 unicast
  redistribute sharp
  neighbor 10.1.13.2 activate
  neighbor 10.1.14.2 activate
  neighbor 10.1.15.2 activate
  neighbor 10.1.16.2 activate
!
! Line vty configuration
line vty
!
end 